<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lahir Mati Pro Aktif</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f8f9fa;
            height: 100%;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            height: 100vh;
            background: linear-gradient(135deg, #003366 0%, #0066cc 50%, #ffffff 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeOut 3s ease-in-out 2s forwards;
        }

        .splash-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .splash-title {
            color: white;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 15px;
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        .splash-subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 16px;
            text-align: center;
            font-weight: 300;
            animation: fadeInUp 1s ease-out 1s both;
            padding: 0 40px;
        }

        /* Header */
        .header {
            background: #003366;
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-logo {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .header-title {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .refresh-button {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            color: white;
        }

        .refresh-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .refresh-button:active {
            transform: scale(0.95);
        }

        .refresh-spinning {
            animation: refreshSpin 1s linear infinite;
        }

        @keyframes refreshSpin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        /* Main Content */
        .main-content {
            padding: 0 0 80px 0;
            min-height: calc(100vh - 140px);
        }

        .page {
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .page.active {
            display: block;
        }

        /* Home Page */
        .hero-section {
            padding: 30px 20px;
            text-align: center;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .hero-illustration {
            width: 200px;
            height: 150px;
            margin: 0 auto 30px;
            background: #e3f2fd;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .main-button {
            background: linear-gradient(135deg, #003366 0%, #0066cc 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,51,102,0.3);
        }

        .main-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,51,102,0.4);
        }

        .service-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            padding: 20px;
        }

        .service-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #F7A400;
        }

        .service-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .service-title {
            font-size: 16px;
            font-weight: 600;
            color: #003366;
        }

        /* Form Page */
        .form-container {
            padding: 20px;
        }

        .form-iframe {
            width: 100%;
            height: 70vh;
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .back-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #5a6268;
        }

        /* Info Pages */
        .info-content {
            padding: 20px;
        }

        .info-title {
            font-size: 24px;
            font-weight: 700;
            color: #003366;
            margin-bottom: 20px;
            text-align: center;
        }

        .info-text {
            font-size: 16px;
            line-height: 1.6;
            color: #495057;
            margin-bottom: 20px;
        }

        .info-illustration {
            width: 100%;
            height: 200px;
            background: #e3f2fd;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            margin: 20px 0;
        }

        .mission-list {
            list-style: none;
            padding: 0;
        }

        .mission-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #F7A400;
        }

        /* Login Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
            position: relative;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #003366;
            margin-bottom: 10px;
        }

        .modal-subtitle {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .modal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #003366 0%, #0066cc 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(0, 51, 102, 0.3);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #003366;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #003366;
            box-shadow: 0 0 0 3px rgba(0, 51, 102, 0.1);
        }

        .login-button {
            width: 100%;
            background: linear-gradient(135deg, #003366 0%, #0066cc 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 51, 102, 0.4);
        }

        .login-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .cancel-button {
            width: 100%;
            background: transparent;
            color: #6c757d;
            border: 2px solid #e9ecef;
            padding: 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cancel-button:hover {
            background: #f8f9fa;
            border-color: #6c757d;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
            text-align: center;
            border: 1px solid #f5c6cb;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        .hidden {
            display: none !important;
        }

        /* Contact Page */
        .contact-info {
            background: white;
            margin: 10px 0;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }

        .contact-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        .contact-button {
            background: white;
            border: 2px solid #003366;
            color: #003366;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .contact-button:hover {
            background: #003366;
            color: white;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 10px;
            transition: all 0.3s ease;
            flex: 1;
        }

        .nav-item.active {
            background: rgba(0,51,102,0.1);
            color: #003366;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 500;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Charts Section */
        .charts-section {
            padding: 20px;
            background: #f8f9fa;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #003366;
            text-align: center;
            margin-bottom: 25px;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #003366;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Professional Pie Chart Styles */
        .pie-chart-container {
            position: relative;
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #e9ecef 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 51, 102, 0.08);
        }

        .pie-chart-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pie-chart-svg {
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1));
        }

        .pie-chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            background: white;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 8px 20px rgba(0, 51, 102, 0.1),
                inset 0 2px 8px rgba(255, 255, 255, 0.8);
            border: 3px solid rgba(0, 51, 102, 0.1);
        }

        .pie-total {
            font-size: 28px;
            font-weight: 800;
            color: #003366;
            margin-bottom: 4px;
            letter-spacing: -1px;
        }

        .pie-label {
            font-size: 11px;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pie-legend {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .pie-legend-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            border: 2px solid rgba(0, 51, 102, 0.05);
        }

        .pie-legend-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: rgba(0, 51, 102, 0.15);
        }

        .pie-legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
        }

        .pie-legend-content {
            flex: 1;
        }

        .pie-legend-title {
            font-size: 15px;
            font-weight: 600;
            color: #003366;
            margin-bottom: 4px;
        }

        .pie-legend-stats {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .pie-legend-percentage {
            font-size: 18px;
            font-weight: 700;
            color: #003366;
        }

        .pie-legend-count {
            font-size: 12px;
            color: #6c757d;
            background: #f8f9fa;
            padding: 3px 8px;
            border-radius: 8px;
            font-weight: 500;
        }

        .pie-slice {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .pie-slice:hover {
            filter: brightness(1.1);
            transform: scale(1.02);
        }

        /* Legacy chart styles for compatibility */
        .donut-chart {
            position: relative;
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .chart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .chart-total {
            font-size: 24px;
            font-weight: 700;
            color: #003366;
        }

        .chart-label {
            font-size: 12px;
            color: #6c757d;
        }

        .donut-svg {
            transform: rotate(-90deg);
        }

        .progress-circle {
            transition: stroke-dashoffset 2s ease-in-out;
        }

        .chart-legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            padding: 4px 0;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-value {
            font-weight: 600;
            color: #003366;
            margin-left: auto;
        }

        /* Bar Chart */
        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .bar-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bar-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .bar-label {
            font-weight: 500;
            color: #495057;
        }

        .bar-value {
            font-weight: 600;
            color: #003366;
        }

        .bar-track {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1.5s ease-in-out;
            animation: fillBar 2s ease-in-out;
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: #F7A400;
            transform: translateY(-2px);
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .stat-number {
            font-size: 20px;
            font-weight: 700;
            color: #003366;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
        }

        .stat-change.positive {
            background: #d4edda;
            color: #155724;
        }

        .stat-change.negative {
            background: #f8d7da;
            color: #721c24;
        }

        /* Chart Animations */
        @keyframes fillBar {
            from {
                width: 0%;
            }
        }

        @keyframes fadeInChart {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .chart-container {
            animation: fadeInChart 0.6s ease-out;
        }

        .chart-container:nth-child(2) {
            animation-delay: 0.2s;
        }

        .chart-container:nth-child(3) {
            animation-delay: 0.4s;
        }

        .chart-container:nth-child(4) {
            animation-delay: 0.6s;
        }

        /* Responsive Design */
        @media (max-width: 375px) {
            .splash-title {
                font-size: 24px;
            }
            
            .hero-illustration {
                width: 180px;
                height: 130px;
            }
            
            .main-button {
                padding: 15px 30px;
                font-size: 16px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .stat-card {
                padding: 12px;
            }

            .donut-svg {
                width: 180px;
                height: 180px;
            }

            .chart-total {
                font-size: 20px;
            }

            .legend-item {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Splash Screen -->
        <div class="splash-screen" id="splashScreen">
            <div class="splash-logo">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjgWFoe-irE1PbxmdBr6ivcCvOcUbWboZcIqE0h9OiVrCH5QCtpc0Ukdw7GdQVjIJ-9fn1pQA3jPxyq3VeJFOYdzurj7O0VaoPJt0ZEaZM-xBpmF5yDYqDRQj8ttjSVJVyjStLS-Nf0TA4EKIo4AR5Ea6Ll7CE3vh3SZpVz0djRmI2nnMmCGYDXWt2rZVhW/s320/LAHIR_MATI__2_-removebg-preview.png" 
                     alt="Lahir Mati Pro Aktif Logo" 
                     style="width: 120px; height: 120px; object-fit: contain;"
                     onerror="this.style.display='none'; this.alt='Logo failed to load';">
            </div>
            <div class="splash-title">Lahir Mati Pro Aktif</div>
            <div class="splash-subtitle">Melayani dari Hati untuk Tanimbar</div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="header-logo">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjgWFoe-irE1PbxmdBr6ivcCvOcUbWboZcIqE0h9OiVrCH5QCtpc0Ukdw7GdQVjIJ-9fn1pQA3jPxyq3VeJFOYdzurj7O0VaoPJt0ZEaZM-xBpmF5yDYqDRQj8ttjSVJVyjStLS-Nf0TA4EKIo4AR5Ea6Ll7CE3vh3SZpVz0djRmI2nnMmCGYDXWt2rZVhW/s320/LAHIR_MATI__2_-removebg-preview.png" 
                     alt="Logo" 
                     style="width: 32px; height: 32px; object-fit: contain;"
                     onerror="this.style.display='none'; this.alt='Logo failed to load';">
            </div>
            <div class="header-title">Lahir Mati Pro Aktif</div>
            <div class="refresh-button" onclick="refreshApp()" title="Refresh Aplikasi">
                <span id="refreshIcon">🔄</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Page -->
            <div class="page active" id="homePage">


                <!-- Progress Charts Section -->
                <div class="charts-section">
                    <h3 class="section-title">📊 Dashboard Layanan</h3>
                    
                    <!-- Document Types Chart -->
                    <div class="chart-container">
                        <h4 class="chart-title">📊 Distribusi Jenis Dokumen</h4>
                        <div class="pie-chart-container">
                            <div class="pie-chart-wrapper">
                                <svg class="pie-chart-svg" width="280" height="280" viewBox="0 0 280 280">
                                    <defs>
                                        <filter id="pieDropShadow" x="-50%" y="-50%" width="200%" height="200%">
                                            <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="rgba(0,0,0,0.15)"/>
                                        </filter>
                                    </defs>
                                    <g id="pieSlices" transform="translate(140,140)" filter="url(#pieDropShadow)">
                                        <!-- Pie slices will be generated by JavaScript -->
                                    </g>
                                </svg>
                                <div class="pie-chart-center">
                                    <div class="pie-total">1,247</div>
                                    <div class="pie-label">Total Dokumen</div>
                                </div>
                            </div>
                        </div>
                        <div class="pie-legend">
                            <div class="pie-legend-item">
                                <div class="pie-legend-color" style="background: #003366;"></div>
                                <div class="pie-legend-content">
                                    <div class="pie-legend-title">🧒 Akta Kelahiran</div>
                                    <div class="pie-legend-stats">
                                        <span class="pie-legend-percentage">70%</span>
                                        <span class="pie-legend-count">873 dokumen</span>
                                    </div>
                                </div>
                            </div>
                            <div class="pie-legend-item">
                                <div class="pie-legend-color" style="background: #F7A400;"></div>
                                <div class="pie-legend-content">
                                    <div class="pie-legend-title">⚰️ Akta Kematian</div>
                                    <div class="pie-legend-stats">
                                        <span class="pie-legend-percentage">30%</span>
                                        <span class="pie-legend-count">374 dokumen</span>
                                    </div>
                                </div>
                            </div>
                            <div class="pie-legend-item">
                                <div class="pie-legend-color" style="background: #28a745;"></div>
                                <div class="pie-legend-content">
                                    <div class="pie-legend-title">📋 Akta Lahir Mati</div>
                                    <div class="pie-legend-stats">
                                        <span class="pie-legend-percentage">0%</span>
                                        <span class="pie-legend-count">0 dokumen</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Districts Progress Chart -->
                    <div class="chart-container">
                        <h4 class="chart-title">Progres per Kecamatan</h4>
                        <div class="bar-chart">
                            <div class="bar-item">
                                <div class="bar-info">
                                    <span class="bar-label">Tanimbar Selatan</span>
                                    <span class="bar-value">85%</span>
                                </div>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 85%; background: linear-gradient(90deg, #003366, #0066cc);"></div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-info">
                                    <span class="bar-label">Tanimbar Utara</span>
                                    <span class="bar-value">72%</span>
                                </div>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 72%; background: linear-gradient(90deg, #F7A400, #ffc107);"></div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-info">
                                    <span class="bar-label">Selaru</span>
                                    <span class="bar-value">68%</span>
                                </div>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 68%; background: linear-gradient(90deg, #28a745, #20c997);"></div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-info">
                                    <span class="bar-label">Wer Tamrian</span>
                                    <span class="bar-value">61%</span>
                                </div>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 61%; background: linear-gradient(90deg, #6f42c1, #8e44ad);"></div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-info">
                                    <span class="bar-label">Wer Maktian</span>
                                    <span class="bar-value">55%</span>
                                </div>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 55%; background: linear-gradient(90deg, #dc3545, #e74c3c);"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                
                <div class="service-cards">
                    <div class="service-card" onclick="showFormWithAuth()">
                        <div class="service-icon">🧒</div>
                        <div class="service-title">Pelaporan Kelahiran</div>
                    </div>
                    
                    <div class="service-card" onclick="showFormWithAuth()">
                        <div class="service-icon">⚰️</div>
                        <div class="service-title">Pelaporan Kematian</div>
                    </div>
                    
                    <div class="service-card" onclick="showFormWithAuth()">
                        <div class="service-icon">📋</div>
                        <div class="service-title">Pelaporan Lahir Mati</div>
                    </div>
                    
                    <div class="service-card" onclick="showPage('infoPage')">
                        <div class="service-icon">ℹ️</div>
                        <div class="service-title">Informasi Layanan</div>
                    </div>
                </div>
            </div>

            <!-- Form Page -->
            <div class="page" id="formPage">
                <div class="form-container">
                    <button class="back-button" onclick="showPage('homePage')">
                        ← Kembali ke Beranda
                    </button>
                    <iframe 
                        src="https://tally.so/r/wkVByM" 
                        class="form-iframe"
                        title="Formulir Pendaftaran"
                        id="formIframe">
                    </iframe>
                </div>
            </div>

            <!-- Info Page -->
            <div class="page" id="infoPage">
                <div class="info-content">
                    <h2 class="info-title">Informasi Layanan</h2>
                    
                    <div class="info-illustration">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhlJ-m2vebcd0YMa5BumCHmpX4mZyLEHVpJxfU4whFkchqnnpyua7HO1qFumRRoIeEZTsaoIYYX4XTh5FyE-MWS8MnanSaWb2V-5hX-aWHBj2peshgNuJeuHY9WiSI59Yfa1aYyrHvlwtIfNBf_23W4wERfFZzTDyM7isSJ-xPS7yF9Y3P9EQIGAQx3QlHC/s320/PROSEDUR%20DAN%20PERSYARATAN%20(1).gif" 
                             alt="Prosedur dan Persyaratan" 
                             style="width: 100%; height: 100%; object-fit: contain; border-radius: 15px;"
                             onerror="this.style.display='none'; this.alt='Gambar gagal dimuat';">
                    </div>
                    
                    <p class="info-text">
                        Layanan Lahir Mati Pro Aktif adalah inovasi Dinas Kependudukan dan Pencatatan Sipil Kabupaten Kepulauan Tanimbar untuk memastikan setiap peristiwa kelahiran dan kematian dapat dilaporkan dengan mudah, cepat, dan tanpa biaya.
                    </p>
                    
                    <p class="info-text">
                        Dengan teknologi digital terdepan, kami berkomitmen memberikan pelayanan administrasi kependudukan yang berkualitas untuk seluruh masyarakat Kepulauan Tanimbar.
                    </p>

                    <!-- Tata Cara Pelaporan Section -->
                    <div style="margin-top: 40px;">
                        <h3 style="color: #003366; font-size: 20px; margin-bottom: 25px; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            📋 Tata Cara Pelaporan
                        </h3>

                        <!-- Pencatatan Kelahiran -->
                        <div class="procedure-section" style="background: white; border-radius: 15px; padding: 20px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #003366;">
                            <h4 style="color: #003366; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                🧒 Pencatatan Kelahiran WNI Dalam Wilayah NKRI
                            </h4>
                            
                            <div style="margin-bottom: 20px;">
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">📝 Persyaratan:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">Fotokopi surat keterangan kelahiran yaitu dari rumah sakit/Puskesmas/fasilitas kesehatan/dokter/bidan atau surat keterangan kelahiran dari nakhoda kapal laut/kapten pesawat terbang, atau dari kepala desa/lurah jika lahir di rumah/tempat lain, antara lain: kebun, sawah, angkutan umum.</li>
                                    <li style="margin-bottom: 8px;">Fotokopi buku nikah/kutipan akta perkawinan/bukti lain yang sah.</li>
                                    <li style="margin-bottom: 8px;">Fotokopi KK dimana penduduk terdaftar atau akan didaftarkan sebagai anggota keluarga.</li>
                                    <li style="margin-bottom: 8px;">Berita acara dari kepolisian bagi anak yang tidak diketahui asal usulnya/keberadaan orang tuanya.</li>
                                    <li style="margin-bottom: 8px;">Penduduk dapat membuat SPTJM kebenaran data kelahiran dengan mengisi <a href="https://drive.google.com/file/d/1X7izO1m--7VFK4CNSQC3xDvdvr17QUEY/view?usp=drive_link" target="_blank" rel="noopener noreferrer" style="color: #003366; text-decoration: underline;">F-2.03</a> dan 2 (dua) orang saksi, jika tidak memenuhi persyaratan sebagaimana angka 1.</li>
                                    <li style="margin-bottom: 8px;">Penduduk dapat membuat SPTJM kebenaran sebagai pasangan suami istri dengan mengisi <a href="https://drive.google.com/file/d/1b880GfnzrIZ7FZbwtNWuHR-xcC53Z6Y4/view?usp=drive_link" target="_blank" rel="noopener noreferrer" style="color: #003366; text-decoration: underline;">F-2.04</a> dan 2 (dua) orang saksi, jika tidak memenuhi persyaratatan sebagaimana angka 2.</li>
                                </ol>
                            </div>

                            <div>
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">⚙️ Tata Cara:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">WNI mengisi formulir <a href="https://drive.google.com/file/d/1ZRafHzRDlJwNuR4Uhka8Tw-WmoqbEgh9/view?usp=drive_link" target="_blank" rel="noopener noreferrer" style="color: #003366; text-decoration: underline;">F-2.01</a>.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan secara offline/tatap muka, persyaratan surat keterangan kelahiran yang diserahkan berupa fotokopi bukan asli (asli hanya diperlihatkan).</li>
                                    <li style="margin-bottom: 8px;">Dinas tidak menarik surat keterangan kelahiran asli.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan online/Daring, persyaratan yang discan/difoto untuk diunggah harus aslinya.</li>
                                    <li style="margin-bottom: 8px;">WNI melampirkan Fotokopi KK untuk verifikasi data yang tercantum dalam formulir F-2.01.</li>
                                    <li style="margin-bottom: 8px;">WNI tidak perlu melampirkan fotokopi KTP-el saksi, karena identitas saksi sudah tercantum dalam formulir F-2.01.</li>
                                    <li style="margin-bottom: 8px; font-weight: 600; color: #003366;">Dinas menerbitkan kutipan akta kelahiran.</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Pencatatan Kematian -->
                        <div class="procedure-section" style="background: white; border-radius: 15px; padding: 20px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #F7A400;">
                            <h4 style="color: #003366; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                ⚰️ Pencatatan Kematian Dalam Wilayah NKRI
                            </h4>
                            
                            <div style="margin-bottom: 20px;">
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">📝 Persyaratan:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">Fotokopi surat kematian dari dokter atau kepala desa/lurah atau yang disebut dengan nama lain, atau surat keterangan kepolisian bagi kematian seseorang yang tidak jelas identitasnya, atau salinan penetapan pengadilan bagi seseorang yang tidak jelas keberadaannya karena hilang atau mati tetapi tidak ditemukan jenazahnya, atau surat pernyataan kematian dari maskapai penerbangan bagi seseorang yang tidak jelas keberadaannya karena hilang atau mati tetapi tidak ditemukan jenazahnya sesuai dengan ketentuan peraturan perundang-undangan, atau surat keteterangan kematian dari Perwakilan RI bagi penduduk yang kematiannya di luar wilayah NKRI.</li>
                                    <li style="margin-bottom: 8px;">Fotokopi Dokumen Perjalanan Republik Indonesia bagi WNI bukan Penduduk atau Fotokopi Dokumen Perjalanan bagi OA.</li>
                                    <li style="margin-bottom: 8px;">Fotokopi KK/KTP yang meninggal dunia.</li>
                                </ol>
                            </div>

                            <div>
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">⚙️ Tata Cara:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">WNI mengisi <a href="https://drive.google.com/file/d/1ZRafHzRDlJwNuR4Uhka8Tw-WmoqbEgh9/view?usp=drive_link" target="_blank" rel="noopener noreferrer" style="color: #003366; text-decoration: underline;">F-2.01</a>.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan secara offline/tatap muka, persyaratan surat kematian yang diserahkan berupa fotokopi bukan asli (asli hanya diperlihatkan).</li>
                                    <li style="margin-bottom: 8px;">Dinas tidak menarik surat kematian asli.</li>
                                    <li style="margin-bottom: 8px;">WNI melampirkan fotokopi KK untuk verifikasi data yang tercantum dalam formulir F-2.01.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan online/Daring, persyaratan yang discan/difoto untuk diunggah harus aslinya.</li>
                                    <li style="margin-bottom: 8px;">Pencatatan Kematian dilaporkan tidak hanya oleh anak atau ahli waris tetapi dapat juga dilaporkan oleh keluarga lainnya, termasuk ketua RT.</li>
                                    <li style="margin-bottom: 8px;">Dalam hal subjek akta tidak tercantum dalam KK dan database kependudukan, kutipan akta kematian diterbitkan tanpa NIK.</li>
                                    <li style="margin-bottom: 8px; font-weight: 600; color: #003366;">Dinas menerbitkan kutipan akta kematian.</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Pencatatan Lahir Mati -->
                        <div class="procedure-section" style="background: white; border-radius: 15px; padding: 20px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #28a745;">
                            <h4 style="color: #003366; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                📋 Pencatatan Lahir Mati
                            </h4>
                            
                            <div style="margin-bottom: 20px;">
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">📝 Persyaratan:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">Fotokopi surat keterangan lahir mati, yaitu dari rumah sakit/Puskesmas/fasilitas kesehatan/dokter/bidan, surat keterangan lahir mati dari nakhoda kapal laut/kapten pesawat terbang, atau dari kepala desa/lurah jika lahir mati di rumah/tempat lain, antara lain: kebun, sawah, angkutan umum atau</li>
                                    <li style="margin-bottom: 8px;">Pernyataan dari orang tua kandung atau wali bagi yang tidak memiliki surat keterangan lahir mati;</li>
                                    <li style="margin-bottom: 8px;">Fotokopi KK orang tua.</li>
                                </ol>
                            </div>

                            <div>
                                <h5 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">⚙️ Tata Cara:</h5>
                                <ol style="padding-left: 20px; line-height: 1.8; color: #495057;">
                                    <li style="margin-bottom: 8px;">WNI mengisi formulir <a href="https://drive.google.com/file/d/1ZRafHzRDlJwNuR4Uhka8Tw-WmoqbEgh9/view?usp=drive_link" target="_blank" rel="noopener noreferrer" style="color: #003366; text-decoration: underline;">F-2.01</a>.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan secara offline/tatap muka, persyaratan surat keterangan lahir mati yang diserahkan berupa fotokopi bukan asli (asli hanya diperlihatkan).</li>
                                    <li style="margin-bottom: 8px;">Dinas tidak menarik surat keterangan lahir mati asli.</li>
                                    <li style="margin-bottom: 8px;">WNI melampirkan Fotokopi KK untuk verifikasi data yang tercantum dalam formulir F-2.01.</li>
                                    <li style="margin-bottom: 8px;">Untuk pelayanan online/Daring, persyaratan yang discan/difoto untuk diunggah harus aslinya.</li>
                                    <li style="margin-bottom: 8px;">WNI tidak perlu melampirkan fotokopi KTP-el saksi, karena identitasnya sudah tercantum dalam formulir F-2.01.</li>
                                    <li style="margin-bottom: 8px; font-weight: 600; color: #003366;">Dinas menerbitkan surat keterangan lahir mati.</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Info Tambahan -->
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%); border-radius: 15px; padding: 20px; margin-top: 25px; border-left: 5px solid #28a745;">
                            <h5 style="color: #003366; font-size: 16px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                💡 Informasi Penting
                            </h5>
                            <ul style="padding-left: 20px; line-height: 1.8; color: #495057; list-style-type: disc;">
                                <li style="margin-bottom: 8px;">Semua layanan pencatatan kelahiran dan kematian <strong style="color: #28a745;">GRATIS</strong></li>
                                <li style="margin-bottom: 8px;">Pelaporan dapat dilakukan secara <strong>online</strong> melalui aplikasi ini atau <strong>offline</strong> langsung ke kantor Dinas Dukcapil</li>
                                <li style="margin-bottom: 8px;">Untuk informasi lebih lanjut, hubungi Dinas Kependudukan dan Pencatatan Sipil Kabupaten Kepulauan Tanimbar</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Page -->
            <div class="page" id="aboutPage">
                <div class="info-content">
                    <h2 class="info-title">Lahir Mati Pro Aktif</h2>
                    
                    <div class="info-illustration" style="background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #e9ecef 100%); border: 3px solid rgba(0, 51, 102, 0.1);">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjgWFoe-irE1PbxmdBr6ivcCvOcUbWboZcIqE0h9OiVrCH5QCtpc0Ukdw7GdQVjIJ-9fn1pQA3jPxyq3VeJFOYdzurj7O0VaoPJt0ZEaZM-xBpmF5yDYqDRQj8ttjSVJVyjStLS-Nf0TA4EKIo4AR5Ea6Ll7CE3vh3SZpVz0djRmI2nnMmCGYDXWt2rZVhW/s320/LAHIR_MATI__2_-removebg-preview.png" 
                             alt="Logo Lahir Mati Pro Aktif" 
                             style="width: 120px; height: 120px; object-fit: contain;"
                             onerror="this.style.display='none'; this.alt='Logo failed to load';">
                    </div>
                    
                    <h3 style="color: #003366; font-size: 16px; margin: 20px 0 15px; text-align: center; font-weight: 600;">Mempercepat Layanan Dasar dan Meningkatkan Kualitas Data Kependudukan Kabupaten Kepulauan Tanimbar</h3>
                    
                    <p class="info-text" style="text-align: center; font-style: italic; background: #f8f9fa; padding: 15px; border-radius: 10px; border-left: 4px solid #F7A400;">
                        Platform Digital Khusus untuk Tenaga Kesehatan yang digunakan untuk kebutuhan Pelaporan Kelahiran, Kematian, dan Lahir Mati yang Akurat, Cepat, dan Terintegrasi dengan Dinas Kependudukan dan Pencatatan Kabupaten Kepulauan Tanimbar
                    </p>

                    <h3 style="color: #003366; font-size: 18px; margin: 25px 0 15px; display: flex; align-items: center; gap: 10px;">🏝️ Solusi Digital untuk Kepulauan Tanimbar</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 8px;">⚡</div>
                            <div style="font-weight: 600; color: #003366; font-size: 14px;">Cepat</div>
                            <div style="font-size: 11px; color: #6c757d;">Lightning Fast</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 8px;">🎯</div>
                            <div style="font-weight: 600; color: #003366; font-size: 14px;">Akurat</div>
                            <div style="font-size: 11px; color: #6c757d;">Precise Data</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <div style="font-size: 24px; margin-bottom: 8px;">🔗</div>
                            <div style="font-weight: 600; color: #003366; font-size: 14px;">Terintegrasi</div>
                            <div style="font-size: 11px; color: #6c757d;">Connected System</div>
                        </div>
                    </div>

                    <h3 style="color: #003366; font-size: 18px; margin: 25px 0 15px; display: flex; align-items: center; gap: 10px;">💫 Tentang Aplikasi</h3>
                    <h4 style="color: #F7A400; font-size: 16px; margin-bottom: 15px; font-weight: 600;">Inovasi Digital untuk Masa Depan Kabupaten Kepulauan Tanimbar</h4>
                    
                    <p class="info-text" style="background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%); padding: 15px; border-radius: 10px; border-left: 4px solid #003366;">
                        Meningkatkan Kualitas Database Kependudukan untuk kebutuhan Pelayanan Publik dan Perencanaan Pembangunan di Kabupaten Kepulauan Tanimbar
                    </p>
                    
                    <p class="info-text">
                        Aplikasi Lahir Mati Pro Aktif merupakan inisiatif strategis Pemerintah Kabupaten Kepulauan Tanimbar untuk menjembatani kesenjangan pelaporan peristiwa kependudukan antara garis depan layanan kesehatan di desa dan kecamatan dengan petugas Dinas Kependudukan dan Pencatatan Sipil (Dukcapil).
                    </p>
                    
                    <p class="info-text">
                        Dibangun dengan pemahaman mendalam terhadap tantangan geografis kepulauan, aplikasi ini mentransformasi proses pelaporan yang sebelumnya manual dan memakan waktu menjadi proses digital yang dapat dilakukan dari mana saja, kapan saja. Setiap laporan yang masuk bukan hanya sekadar data, tetapi merupakan fondasi bagi perencanaan pembangunan kesehatan, sosial, dan ekonomi yang tepat sasaran.
                    </p>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 25px 0; padding: 20px; background: linear-gradient(135deg, #003366 0%, #0066cc 100%); border-radius: 15px; color: white;">
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 28px; margin-bottom: 5px;">🏥</div>
                            <div style="font-size: 12px; font-weight: 500;">Puskesmas & Pustu</div>
                        </div>
                        <div style="font-size: 20px; color: #F7A400;">→</div>
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 28px; margin-bottom: 5px;">📱</div>
                            <div style="font-size: 12px; font-weight: 500;">Platform Digital</div>
                        </div>
                        <div style="font-size: 20px; color: #F7A400;">→</div>
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 28px; margin-bottom: 5px;">🏛️</div>
                            <div style="font-size: 12px; font-weight: 500;">Dinas Dukcapil</div>
                        </div>
                    </div>

                    <h3 style="color: #003366; font-size: 18px; margin: 25px 0 15px; display: flex; align-items: center; gap: 10px;">❓ Mengapa Penting</h3>
                    <h4 style="color: #F7A400; font-size: 16px; margin-bottom: 20px; font-weight: 600;">Mengapa Lahir Mati Pro Aktif Sangat Penting?</h4>

                    <div class="mission-item" style="margin: 15px 0;">
                        <h4 style="color: #003366; font-size: 16px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">👩‍⚕️ Untuk Tenaga Medis</h4>
                        <div style="margin-left: 35px;">
                            <p style="margin: 8px 0; font-size: 14px;"><strong style="color: #F7A400;">🎯 Berkontribusi Langsung</strong></p>
                            <p style="margin: 8px 0; font-size: 14px; color: #495057;">Anda adalah ujung tombak dalam memastikan setiap warga Tanimbar tercatat secara hukum sejak dari detik pertama kehidupannya hingga akhir hayatnya.</p>
                        </div>
                    </div>

                    <div class="mission-item" style="margin: 15px 0;">
                        <h4 style="color: #003366; font-size: 16px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">👨‍👩‍👧‍👦 Untuk Masyarakat</h4>
                        <div style="margin-left: 35px;">
                            <p style="margin: 8px 0; font-size: 14px;"><strong style="color: #F7A400;">⚖️ Kepastian Hukum</strong></p>
                            <p style="margin: 8px 0; font-size: 14px; color: #495057;">Memastikan hak-hak dasar anak (akta kelahiran) dan kepastian hukum bagi ahli waris (akta kematian) dapat diproses tanpa delay.</p>
                            <p style="margin: 8px 0; font-size: 14px;"><strong style="color: #F7A400;">🛡️ Perlindungan Sosial</strong></p>
                            <p style="margin: 8px 0; font-size: 14px; color: #495057;">Data yang akurat dan cepat memungkinkan program bantuan sosial, BPJS, dan program pemerintah lainnya tepat sasaran.</p>
                        </div>
                    </div>

                    <div class="mission-item" style="margin: 15px 0;">
                        <h4 style="color: #003366; font-size: 16px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">🏛️ Untuk Pemerintah</h4>
                        <div style="margin-left: 35px;">
                            <p style="margin: 8px 0; font-size: 14px;"><strong style="color: #F7A400;">📊 Data Real-Time</strong></p>
                            <p style="margin: 8px 0; font-size: 14px; color: #495057;">Mendapatkan data vital yang akurat dan mutakhir untuk keperluan perencanaan kesehatan, alokasi anggaran, dan pemetaan kebijakan.</p>
                            <p style="margin: 8px 0; font-size: 14px;"><strong style="color: #F7A400;">🏆 Good Governance</strong></p>
                            <p style="margin: 8px 0; font-size: 14px; color: #495057;">Mewujudkan transparansi dan akuntabilitas dalam layanan administrasi kependudukan.</p>
                        </div>
                    </div>


                </div>
            </div>

            <!-- Contact Page -->
            <div class="page" id="contactPage">
                <div class="info-content">
                    <h2 class="info-title">Kontak Kami</h2>
                    
                    <div class="contact-info">
                        <h3 style="color: #003366; margin-bottom: 15px;">📍 Alamat</h3>
                        <p>Jl. Ir. Soekarno, Saumlaki, Kepulauan Tanimbar</p>
                    </div>
                    
                    <div class="contact-info">
                        <h3 style="color: #003366; margin-bottom: 15px;">📧 Email</h3>
                        <p>dukcapil@tanimbar.go.id</p>
                    </div>
                    
                    <div class="contact-info">
                        <h3 style="color: #003366; margin-bottom: 15px;">📞 Telepon</h3>
                        <p>(****)******</p>
                    </div>
                    
                    <div class="contact-info">
                        <h3 style="color: #003366; margin-bottom: 15px;">🗺️ Lokasi Kami</h3>
                        <div style="border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); margin-bottom: 20px;">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1975.. !2d131.. !3d-7.. !2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2d2755c0292f2a65%3A0x97d389f87f0d32!2sDinas%20Kependudukan%20dan%20Catatan%20Sipil%20Kabupaten%20Tanimbar!5e0!3m2!1sid!2sid!4v. !5m2!1sid!2sid" 
                                    width="100%" 
                                    height="300" 
                                    style="border:0;" 
                                    allowfullscreen="" 
                                    loading="lazy" 
                                    referrerpolicy="no-referrer-when-downgrade"
                                    title="Lokasi Dinas Dukcapil Tanimbar">
                            </iframe>
                        </div>
                        <p style="font-size: 14px; color: #6c757d; text-align: center; font-style: italic;">
                            📍 Dinas Kependudukan dan Catatan Sipil Kabupaten Tanimbar
                        </p>
                    </div>
                    
                    <div class="contact-buttons">
                        <button class="contact-button" onclick="window.open('tel:+6281343201115', '_blank')">
                            📞 Telepon Kami
                        </button>
                        <button class="contact-button" onclick="window.open('https://wa.me/6281343201115', '_blank')">
                            💬 Chat WhatsApp
                        </button>
                        <button class="contact-button" onclick="window.open('https://dukcapil.tanimbar.go.id', '_blank')">
                            🌐 Kunjungi Website
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Login Modal -->
        <div id="loginModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-icon">🔐</div>
                    <h3 class="modal-title">Login Tenaga Medis</h3>
                    <p class="modal-subtitle">Masukkan username dan password untuk mengakses formulir</p>
                </div>
                
                <form id="loginForm">
                    <div id="errorMessage" class="error-message hidden"></div>
                    
                    <div class="form-group">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" id="username" name="username" class="form-input" placeholder="Masukkan username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" id="password" name="password" class="form-input" placeholder="Masukkan password" required>
                    </div>
                    
                    <button type="submit" id="loginButton" class="login-button">
                        <span id="loginButtonText">Masuk</span>
                    </button>
                    
                    <button type="button" id="cancelButton" class="cancel-button">Batal</button>
                </form>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="showPage('homePage')" data-page="homePage">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">Beranda</div>
            </div>
            <div class="nav-item" onclick="showFormWithAuth()" data-page="formPage">
                <div class="nav-icon">📋</div>
                <div class="nav-label">Formulir</div>
            </div>
            <div class="nav-item" onclick="showPage('infoPage')" data-page="infoPage">
                <div class="nav-icon">ℹ️</div>
                <div class="nav-label">Informasi</div>
            </div>
            <div class="nav-item" onclick="showPage('aboutPage')" data-page="aboutPage">
                <div class="nav-icon">🧭</div>
                <div class="nav-label">Tentang</div>
            </div>
            <div class="nav-item" onclick="showPage('contactPage')" data-page="contactPage">
                <div class="nav-icon">☎️</div>
                <div class="nav-label">Kontak</div>
            </div>
        </nav>
    </div>

    <script>
        // Hide splash screen after animation
        setTimeout(() => {
            document.getElementById('splashScreen').style.display = 'none';
        }, 4000);

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            const activeNav = document.querySelector(`[data-page="${pageId}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Initialize dashboard without animations
        document.addEventListener('DOMContentLoaded', function() {
            const serviceCards = document.querySelectorAll('.service-card');
            serviceCards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // Initialize pie chart
            initializePieChart();

            // Load real data
            updateDashboard();

            // Refresh data every 5 minutes
            setInterval(updateDashboard, 300000);

            // Initialize login modal event listeners
            const loginForm = document.getElementById('loginForm');
            const cancelButton = document.getElementById('cancelButton');
            const loginModal = document.getElementById('loginModal');

            // Handle login form submission
            loginForm.addEventListener('submit', handleLogin);

            // Handle cancel button
            cancelButton.addEventListener('click', hideLoginModal);

            // Handle modal overlay click (close modal)
            loginModal.addEventListener('click', function(event) {
                if (event.target === loginModal) {
                    hideLoginModal();
                }
            });

            // Handle escape key to close modal
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && !loginModal.classList.contains('hidden')) {
                    hideLoginModal();
                }
            });

            // Preload user credentials
            fetchUserCredentials().then(credentials => {
                userCredentials = credentials;
                console.log('User credentials loaded:', credentials.length, 'users');
            });

            // Setup form submission monitoring
            setupFormCommunication();
            monitorFormSubmission();
        });

        // Create pie chart function
        function createPieChart(data) {
            const svg = document.getElementById('pieSlices');
            if (!svg) return;

            // Clear existing slices
            svg.innerHTML = '';

            const total = data.reduce((sum, item) => sum + item.value, 0);
            if (total === 0) return;

            const radius = 100;
            const colors = ['#003366', '#F7A400', '#28a745'];
            
            let currentAngle = -90; // Start from top

            data.forEach((item, index) => {
                const percentage = (item.value / total) * 100;
                const angle = (item.value / total) * 360;
                
                if (percentage > 0) {
                    const slice = createPieSlice(radius, currentAngle, angle, colors[index], item.label);
                    svg.appendChild(slice);
                    currentAngle += angle;
                }
            });
        }

        function createPieSlice(radius, startAngle, angle, color, label) {
            const startAngleRad = (startAngle * Math.PI) / 180;
            const endAngleRad = ((startAngle + angle) * Math.PI) / 180;
            
            const x1 = radius * Math.cos(startAngleRad);
            const y1 = radius * Math.sin(startAngleRad);
            const x2 = radius * Math.cos(endAngleRad);
            const y2 = radius * Math.sin(endAngleRad);
            
            const largeArcFlag = angle > 180 ? 1 : 0;
            
            const pathData = [
                'M', 0, 0,
                'L', x1, y1,
                'A', radius, radius, 0, largeArcFlag, 1, x2, y2,
                'Z'
            ].join(' ');
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', pathData);
            path.setAttribute('fill', color);
            path.setAttribute('class', 'pie-slice');
            path.setAttribute('data-label', label);
            
            return path;
        }

        function initializePieChart() {
            const initialData = [
                { label: 'Akta Kelahiran', value: 873 },
                { label: 'Akta Kematian', value: 374 },
                { label: 'Akta Lahir Mati', value: 0 }
            ];
            createPieChart(initialData);
        }

        // Fetch data from Google Sheets
        async function fetchDataFromSheets() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSzBq9XEMeOz87zErrtN2cxvnMPaBhXqyIqYoSxBoorSlJ9MLCtBxQ9ozPmpKJqoE7OvjoYA80kHGGY/pub?gid=0&single=true&output=csv');
                const csvText = await response.text();
                
                // Parse CSV data
                const rows = csvText.split('\n').map(row => row.split(','));
                const headers = rows[0];
                
                // Find column indices
                const jenisIndex = headers.findIndex(header => 
                    header.toLowerCase().includes('jenis') && header.toLowerCase().includes('dokumen')
                );
                const kecamatanIndex = headers.findIndex(header => 
                    header.toLowerCase().includes('kecamatan')
                );
                
                if (jenisIndex === -1) {
                    console.log('Kolom "Jenis Dokumen" tidak ditemukan');
                    return null;
                }
                
                if (kecamatanIndex === -1) {
                    console.log('Kolom "Kecamatan" tidak ditemukan');
                    return null;
                }
                
                // Count document types
                const documentCounts = {
                    'Akta Kelahiran': 0,
                    'Akta Kematian': 0,
                    'Akta Lahir Mati': 0
                };
                let totalDocuments = 0;
                
                // Count district data
                const districtCounts = {};
                const allDistricts = [
                    'Tanimbar Selatan', 'Selaru', 'Wertamrian', 'Wermaktian', 
                    'Tanimbar Utara', 'Fordata', 'Wuarlabobar', 'Kormomolin', 
                    'Nirunmas', 'Molu Maru'
                ];
                
                // Initialize district counts
                allDistricts.forEach(district => {
                    districtCounts[district] = 0;
                });
                
                for (let i = 1; i < rows.length; i++) {
                    if (rows[i][jenisIndex] && rows[i][jenisIndex].trim()) {
                        const docType = rows[i][jenisIndex].trim();
                        
                        // Categorize documents based on exact matches or keywords
                        if (docType.toLowerCase().includes('lahir mati') || 
                            docType.toLowerCase().includes('akta lahir mati')) {
                            documentCounts['Akta Lahir Mati']++;
                        } else if (docType.toLowerCase().includes('kelahiran') || 
                                   docType.toLowerCase().includes('akta kelahiran') ||
                                   docType.toLowerCase().includes('lahir')) {
                            documentCounts['Akta Kelahiran']++;
                        } else if (docType.toLowerCase().includes('kematian') || 
                                   docType.toLowerCase().includes('akta kematian') ||
                                   docType.toLowerCase().includes('mati')) {
                            documentCounts['Akta Kematian']++;
                        }
                        totalDocuments++;
                    }
                    
                    // Count by district
                    if (rows[i][kecamatanIndex] && rows[i][kecamatanIndex].trim()) {
                        const district = rows[i][kecamatanIndex].trim();
                        
                        // Find matching district (case insensitive)
                        const matchedDistrict = allDistricts.find(d => 
                            d.toLowerCase() === district.toLowerCase() ||
                            district.toLowerCase().includes(d.toLowerCase()) ||
                            d.toLowerCase().includes(district.toLowerCase())
                        );
                        
                        if (matchedDistrict) {
                            districtCounts[matchedDistrict]++;
                        }
                    }
                }
                
                return {
                    total: totalDocuments,
                    aktaKelahiran: documentCounts['Akta Kelahiran'],
                    aktaKematian: documentCounts['Akta Kematian'],
                    aktaLahirMati: documentCounts['Akta Lahir Mati'],
                    districts: districtCounts
                };
                
            } catch (error) {
                console.log('Error fetching data:', error);
                return null;
            }
        }

        // Update dashboard with real data
        async function updateDashboard() {
            const data = await fetchDataFromSheets();
            
            if (data) {
                // Update total count for pie chart
                const totalElement = document.querySelector('.chart-total');
                const pieTotal = document.querySelector('.pie-total');
                if (totalElement) {
                    totalElement.textContent = data.total.toLocaleString();
                }
                if (pieTotal) {
                    pieTotal.textContent = data.total.toLocaleString();
                }
                
                // Calculate percentages for all three document types
                const aktaKelahiranPercent = data.total > 0 ? Math.round((data.aktaKelahiran / data.total) * 100) : 0;
                const aktaKematianPercent = data.total > 0 ? Math.round((data.aktaKematian / data.total) * 100) : 0;
                const aktaLahirMatiPercent = data.total > 0 ? Math.round((data.aktaLahirMati / data.total) * 100) : 0;
                
                // Update pie chart legend
                const pieLegend = document.querySelector('.pie-legend');
                
                if (pieLegend) {
                    pieLegend.innerHTML = `
                        <div class="pie-legend-item">
                            <div class="pie-legend-color" style="background: #003366;"></div>
                            <div class="pie-legend-content">
                                <div class="pie-legend-title">🧒 Akta Kelahiran</div>
                                <div class="pie-legend-stats">
                                    <span class="pie-legend-percentage">${aktaKelahiranPercent}%</span>
                                    <span class="pie-legend-count">${data.aktaKelahiran.toLocaleString()} dokumen</span>
                                </div>
                            </div>
                        </div>
                        <div class="pie-legend-item">
                            <div class="pie-legend-color" style="background: #F7A400;"></div>
                            <div class="pie-legend-content">
                                <div class="pie-legend-title">⚰️ Akta Kematian</div>
                                <div class="pie-legend-stats">
                                    <span class="pie-legend-percentage">${aktaKematianPercent}%</span>
                                    <span class="pie-legend-count">${data.aktaKematian.toLocaleString()} dokumen</span>
                                </div>
                            </div>
                        </div>
                        <div class="pie-legend-item">
                            <div class="pie-legend-color" style="background: #28a745;"></div>
                            <div class="pie-legend-content">
                                <div class="pie-legend-title">📋 Akta Lahir Mati</div>
                                <div class="pie-legend-stats">
                                    <span class="pie-legend-percentage">${aktaLahirMatiPercent}%</span>
                                    <span class="pie-legend-count">${data.aktaLahirMati.toLocaleString()} dokumen</span>
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Update pie chart with new data
                const pieChartData = [
                    { label: 'Akta Kelahiran', value: data.aktaKelahiran },
                    { label: 'Akta Kematian', value: data.aktaKematian },
                    { label: 'Akta Lahir Mati', value: data.aktaLahirMati }
                ];
                createPieChart(pieChartData);
                

                
                // Update district progress bars
                if (data.districts) {
                    updateDistrictChart(data.districts, data.total);
                }
                
                // Update monthly statistics with real data
                const currentMonth = data.total > 0 ? Math.floor(data.total * 0.125) : 156; // Estimate 12.5% for current month
                const statNumbers = document.querySelectorAll('.stat-number');
                if (statNumbers[0]) {
                    statNumbers[0].textContent = currentMonth;
                }
                
                console.log('Dashboard updated with real data:', data);
            }
        }

        // Update district chart with real data
        function updateDistrictChart(districts, totalDocs) {
            // Fixed order as requested
            const orderedDistricts = [
                'Tanimbar Selatan', 'Selaru', 'Wertamrian', 'Wermaktian', 
                'Tanimbar Utara', 'Fordata', 'Wuarlabobar', 'Kormomolin', 
                'Nirunmas', 'Molu Maru'
            ];
            
            // Create array with ordered districts and their counts
            const sortedDistricts = orderedDistricts
                .map(district => [district, districts[district] || 0])
                .filter(([,count]) => count > 0); // Only show districts with data
            
            const barChart = document.querySelector('.bar-chart');
            if (!barChart) return;
            
            // Clear existing bars
            barChart.innerHTML = '';
            
            // Colors for different districts (expanded for all 10 districts)
            const colors = [
                'linear-gradient(90deg, #003366, #0066cc)',
                'linear-gradient(90deg, #F7A400, #ffc107)',
                'linear-gradient(90deg, #28a745, #20c997)',
                'linear-gradient(90deg, #6f42c1, #8e44ad)',
                'linear-gradient(90deg, #dc3545, #e74c3c)',
                'linear-gradient(90deg, #17a2b8, #20c997)',
                'linear-gradient(90deg, #fd7e14, #ffc107)',
                'linear-gradient(90deg, #e83e8c, #f8d7da)',
                'linear-gradient(90deg, #6610f2, #6f42c1)',
                'linear-gradient(90deg, #20c997, #28a745)'
            ];
            
            sortedDistricts.forEach(([district, count], index) => {
                const percentage = totalDocs > 0 ? Math.round((count / totalDocs) * 100) : 0;
                
                const barItem = document.createElement('div');
                barItem.className = 'bar-item';
                barItem.innerHTML = `
                    <div class="bar-info">
                        <span class="bar-label">${district}</span>
                        <span class="bar-value">${percentage}% (${count})</span>
                    </div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width: ${percentage}%; background: ${colors[index % colors.length]};"></div>
                    </div>
                `;
                
                barChart.appendChild(barItem);
            });
            
            // If no data, show message
            if (sortedDistricts.length === 0) {
                barChart.innerHTML = '<p style="text-align: center; color: #6c757d; padding: 20px;">Belum ada data kecamatan</p>';
            }
        }

        // Authentication system
        let userCredentials = [];
        let isAuthenticated = false;

        // Fetch user credentials from Google Sheets
        async function fetchUserCredentials() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vTZ8bmDwSW8fU0j_c8-Ox_rZQEujEHyo70yOd6tFlBDsoGtg9XES6jbOIjWxJSECK5xPbsPKBFkr3Yh/pub?gid=0&single=true&output=csv');
                const csvText = await response.text();
                
                // Parse CSV data
                const rows = csvText.split('\n').map(row => row.split(','));
                const headers = rows[0].map(header => header.trim().toLowerCase());
                
                // Find column indices
                const usernameIndex = headers.findIndex(header => header.includes('username'));
                const passwordIndex = headers.findIndex(header => header.includes('password'));
                const statusIndex = headers.findIndex(header => header.includes('status'));
                
                if (usernameIndex === -1 || passwordIndex === -1 || statusIndex === -1) {
                    console.log('Required columns not found in credentials sheet');
                    return [];
                }
                
                // Extract user data
                const credentials = [];
                for (let i = 1; i < rows.length; i++) {
                    if (rows[i][usernameIndex] && rows[i][passwordIndex] && rows[i][statusIndex]) {
                        credentials.push({
                            username: rows[i][usernameIndex].trim(),
                            password: rows[i][passwordIndex].trim(),
                            status: rows[i][statusIndex].trim().toLowerCase()
                        });
                    }
                }
                
                return credentials;
                
            } catch (error) {
                console.log('Error fetching user credentials:', error);
                return [];
            }
        }

        // Show form with authentication
        function showFormWithAuth() {
            if (isAuthenticated) {
                showPage('formPage');
            } else {
                showLoginModal();
            }
        }

        // Show login modal
        function showLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.remove('hidden');
            document.getElementById('username').focus();
        }

        // Hide login modal
        function hideLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.add('hidden');
            clearLoginForm();
        }

        // Clear login form
        function clearLoginForm() {
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            hideErrorMessage();
        }

        // Show error message
        function showErrorMessage(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        // Hide error message
        function hideErrorMessage() {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.classList.add('hidden');
        }

        // Set loading state
        function setLoadingState(isLoading) {
            const button = document.getElementById('loginButton');
            const buttonText = document.getElementById('loginButtonText');
            
            if (isLoading) {
                button.disabled = true;
                buttonText.innerHTML = '<span class="loading-spinner"></span>Memverifikasi...';
            } else {
                button.disabled = false;
                buttonText.textContent = 'Masuk';
            }
        }

        // Authenticate user
        async function authenticateUser(username, password) {
            // Refresh credentials from server
            userCredentials = await fetchUserCredentials();
            
            const user = userCredentials.find(cred => 
                cred.username === username && 
                cred.password === password && 
                cred.status === 'aktif'
            );
            
            return user !== undefined;
        }

        // Handle login form submission
        async function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username || !password) {
                showErrorMessage('Username dan password harus diisi');
                return;
            }
            
            setLoadingState(true);
            hideErrorMessage();
            
            try {
                const isValid = await authenticateUser(username, password);
                
                if (isValid) {
                    isAuthenticated = true;
                    hideLoginModal();
                    showPage('formPage');
                    
                    // Show success message briefly
                    setTimeout(() => {
                        const successMsg = document.createElement('div');
                        successMsg.style.cssText = `
                            position: fixed;
                            top: 20px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: #d4edda;
                            color: #155724;
                            padding: 15px 25px;
                            border-radius: 10px;
                            z-index: 3000;
                            font-weight: 600;
                            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                        `;
                        successMsg.textContent = '✅ Login berhasil! Selamat datang.';
                        document.body.appendChild(successMsg);
                        
                        setTimeout(() => {
                            document.body.removeChild(successMsg);
                        }, 3000);
                    }, 500);
                } else {
                    showErrorMessage('Username, password salah atau akun tidak aktif');
                }
            } catch (error) {
                showErrorMessage('Terjadi kesalahan saat memverifikasi. Coba lagi.');
                console.log('Authentication error:', error);
            }
            
            setLoadingState(false);
        }

        // Monitor form submission and auto-refresh
        function monitorFormSubmission() {
            const iframe = document.getElementById('formIframe');
            if (!iframe) return;

            // Listen for form submission completion
            let checkSubmissionInterval;
            
            iframe.onload = function() {
                // Clear any existing interval
                if (checkSubmissionInterval) {
                    clearInterval(checkSubmissionInterval);
                }
                
                // Start monitoring for form submission
                checkSubmissionInterval = setInterval(() => {
                    try {
                        // Check if iframe URL has changed (indicating form submission)
                        const currentSrc = iframe.src;
                        
                        // If URL contains success parameters or thank you page
                        if (currentSrc.includes('thank') || currentSrc.includes('success') || currentSrc.includes('submitted')) {
                            // Form has been submitted successfully
                            clearInterval(checkSubmissionInterval);
                            
                            // Show success message
                            const successMsg = document.createElement('div');
                            successMsg.style.cssText = `
                                position: fixed;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                background: #d4edda;
                                color: #155724;
                                padding: 20px 30px;
                                border-radius: 15px;
                                z-index: 3000;
                                font-size: 16px;
                                font-weight: 600;
                                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                                text-align: center;
                                border: 2px solid #c3e6cb;
                            `;
                            successMsg.innerHTML = '✅ Formulir berhasil dikirim!<br><small style="font-weight: 400;">Aplikasi akan diperbarui...</small>';
                            document.body.appendChild(successMsg);
                            
                            // Auto refresh and redirect to home after 2 seconds
                            setTimeout(() => {
                                document.body.removeChild(successMsg);
                                
                                // Refresh the iframe to reset form
                                iframe.src = iframe.src;
                                
                                // Refresh dashboard data
                                refreshApp();
                                
                                // Redirect to home page
                                showPage('homePage');
                                
                                // Show completion message on home page
                                setTimeout(() => {
                                    const completeMsg = document.createElement('div');
                                    completeMsg.style.cssText = `
                                        position: fixed;
                                        top: 80px;
                                        left: 50%;
                                        transform: translateX(-50%);
                                        background: #d1ecf1;
                                        color: #0c5460;
                                        padding: 12px 20px;
                                        border-radius: 8px;
                                        z-index: 3000;
                                        font-size: 14px;
                                        font-weight: 500;
                                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                        max-width: 300px;
                                        text-align: center;
                                    `;
                                    completeMsg.textContent = '✅ Data berhasil dikirim! Kembali ke beranda';
                                    document.body.appendChild(completeMsg);
                                    
                                    setTimeout(() => {
                                        if (document.body.contains(completeMsg)) {
                                            document.body.removeChild(completeMsg);
                                        }
                                    }, 3000);
                                }, 500);
                                
                            }, 2000);
                        }
                    } catch (error) {
                        // Cross-origin restrictions prevent direct access
                        // Use alternative method: monitor for URL changes
                        console.log('Monitoring form submission...');
                    }
                }, 2000); // Check every 2 seconds
            };
        }

        // Alternative method: Monitor form submission using postMessage
        function setupFormCommunication() {
            window.addEventListener('message', function(event) {
                // Check if message is from Tally form
                if (event.origin.includes('tally.so')) {
                    if (event.data && event.data.type === 'TALLY_FORM_SUBMIT') {
                        // Form has been submitted
                        const successMsg = document.createElement('div');
                        successMsg.style.cssText = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: #d4edda;
                            color: #155724;
                            padding: 20px 30px;
                            border-radius: 15px;
                            z-index: 3000;
                            font-size: 16px;
                            font-weight: 600;
                            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                            text-align: center;
                            border: 2px solid #c3e6cb;
                        `;
                        successMsg.innerHTML = '✅ Formulir berhasil dikirim!<br><small style="font-weight: 400;">Aplikasi akan diperbarui...</small>';
                        document.body.appendChild(successMsg);
                        
                        // Auto refresh and redirect to home after 2 seconds
                        setTimeout(() => {
                            document.body.removeChild(successMsg);
                            
                            // Refresh the iframe to reset form
                            const iframe = document.getElementById('formIframe');
                            if (iframe) {
                                iframe.src = iframe.src;
                            }
                            
                            // Refresh dashboard data
                            refreshApp();
                            
                            // Redirect to home page
                            showPage('homePage');
                            
                            // Show completion message on home page
                            setTimeout(() => {
                                const completeMsg = document.createElement('div');
                                completeMsg.style.cssText = `
                                    position: fixed;
                                    top: 80px;
                                    left: 50%;
                                    transform: translateX(-50%);
                                    background: #d1ecf1;
                                    color: #0c5460;
                                    padding: 12px 20px;
                                    border-radius: 8px;
                                    z-index: 3000;
                                    font-size: 14px;
                                    font-weight: 500;
                                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                    max-width: 300px;
                                    text-align: center;
                                `;
                                completeMsg.textContent = '✅ Data berhasil dikirim! Kembali ke beranda';
                                document.body.appendChild(completeMsg);
                                
                                setTimeout(() => {
                                    if (document.body.contains(completeMsg)) {
                                        document.body.removeChild(completeMsg);
                                    }
                                }, 3000);
                            }, 500);
                            
                        }, 2000);
                    }
                }
            });
        }

        // Page navigation function
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            const activeNav = document.querySelector(`[data-page="${pageId}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Refresh application
        function refreshApp() {
            const refreshIcon = document.getElementById('refreshIcon');
            
            // Add spinning animation
            refreshIcon.classList.add('refresh-spinning');
            
            // Update dashboard data
            updateDashboard().then(() => {
                // Refresh user credentials
                return fetchUserCredentials();
            }).then(credentials => {
                userCredentials = credentials;
                console.log('App refreshed - credentials updated:', credentials.length, 'users');
                
                // Remove spinning animation after refresh complete
                setTimeout(() => {
                    refreshIcon.classList.remove('refresh-spinning');
                }, 1000);
                
                // Show success message
                const successMsg = document.createElement('div');
                successMsg.style.cssText = `
                    position: fixed;
                    top: 80px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #d4edda;
                    color: #155724;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 3000;
                    font-size: 14px;
                    font-weight: 500;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    max-width: 300px;
                    text-align: center;
                `;
                successMsg.textContent = '✅ Data berhasil diperbarui';
                document.body.appendChild(successMsg);
                
                setTimeout(() => {
                    if (document.body.contains(successMsg)) {
                        document.body.removeChild(successMsg);
                    }
                }, 2500);
                
            }).catch(error => {
                console.log('Refresh error:', error);
                
                // Remove spinning animation on error
                refreshIcon.classList.remove('refresh-spinning');
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.style.cssText = `
                    position: fixed;
                    top: 80px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #f8d7da;
                    color: #721c24;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 3000;
                    font-size: 14px;
                    font-weight: 500;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    max-width: 300px;
                    text-align: center;
                `;
                errorMsg.textContent = '❌ Gagal memperbarui data';
                document.body.appendChild(errorMsg);
                
                setTimeout(() => {
                    if (document.body.contains(errorMsg)) {
                        document.body.removeChild(errorMsg);
                    }
                }, 2500);
            });
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'993a64291586ce75',t:'MTc2MTMxODUyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
